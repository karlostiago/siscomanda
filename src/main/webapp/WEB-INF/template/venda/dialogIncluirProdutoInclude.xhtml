<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
	
	<p:dialog widgetVar="dialogIncluirProduto" modal="true" responsive="true" styleClass="ui-container-dialog" 
			showEffect="fade" hideEffect="fade" resizable="false" draggable="false" id="dialogAdicionaProduto">
			
		<f:facet name="header">Incluir produto ao pedido</f:facet>	
		
		<div class="row">
			<div class="col-md-10 col-sm-10 col-xs-12">
				<label>Produto</label>
				<h:outputText value="#{crudBean.produtoSelecionado.descricao}" styleClass="form-control" />
			</div>
			
			<div class="col-md-2 col-sm-2 col-xs-12">
				<label>Quantidade.:</label>
				<h:inputText value="#{crudBean.quantidade}" styleClass="form-control currency">
					<f:convertNumber minFractionDigits="2" maxFractionDigits="2" locale="pt_BR" />
				</h:inputText>
			</div>
			
			<div class="col-md-12 col-sm-12 col-xs-12">
				<label>Observação.:</label>
				<h:inputText value="#{crudBean.itemSelecionado.observacao}" styleClass="form-control" onkeyup="maiuscula(this)" />
			</div>
		</div>
		
		<div class="row">
			<h:panelGroup layout="block" id="grid_pesquisa_adicional" rendered="#{crudBean.produtoSelecionado.permiteAdicional}">
				<div class="col-md-12 col-sm-12 col-xs-12">
					<label>Pesquisa produto adicional.:</label>
					<h:inputText value="#{crudBean.filterPesquisar}" styleClass="form-control" disabled="#{!crudBean.produtoSelecionado.permiteAdicional}" >
						<p:ajax event="keyup" process="@this" global="false" delay="400" update=":crudform:selectManyCheckboxAdicionais" listener="#{crudBean.ajaxPesquisaAdicional}" />
					</h:inputText>
				</div>
				
				<div class="col-md-12 col-sm-12 col-xs-12">
					<p:selectManyCheckbox value="#{crudBean.selectManyCheckBoxAdicionais}" id="selectManyCheckboxAdicionais" layout="grid" columns="1" converter="entityConverter">
						<f:selectItems value="#{crudBean.adicionais}" var="adicional" itemLabel="#{adicional.descricao} - #{crudBean.formatMoeda(adicional.precoVenda)}" itemValue="#{adicional}" />
						<p:ajax event="change" process="@this" global="false" />
					</p:selectManyCheckbox>
				</div>
			</h:panelGroup>
		</div>
		
		<f:facet name="footer">
			<p:commandButton  oncomplete="PF('dialogIncluirProduto').hide();" styleClass="btn btn-success btn-xs" value="Salvar" global="false"
				action="#{crudBean.btnAdicionaItem}" update=":crudform:headerPedidoVenda :crudform:gridTabelaPedidoVenda :crudform:dialogAdicionaProduto" />
				
			<p:commandButton  oncomplete="PF('dialogIncluirProduto').hide(); return false;"  styleClass="btn btn-danger btn-xs" value="Cancelar" global="false" />
		</f:facet>
		
		<script>
		 	/* <![CDATA[ */
			$(function(){
				$(".currency").maskMoney({
					thousands:'.', 
					decimal:',',
					allowZero: true
				});
			});
			/* ]]> */
		</script>
	</p:dialog>
	
</ui:composition>